"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Notification = void 0;
const react_1 = __importDefault(require("react"));
const uikit_1 = require("@gravity-ui/uikit");
const cn_1 = require("../utils/cn");
require("./Notification.css");
const b = (0, cn_1.block)('notification');
exports.Notification = react_1.default.memo(function Notification(props) {
    const mobile = (0, uikit_1.useMobile)();
    const { notification } = props;
    const { title, content, formattedDate, source, unread, theme } = notification;
    const modifiers = { unread, theme, mobile, active: Boolean(notification.onClick) };
    const sourceIcon = source && renderSourceIcon(source);
    return (
    // eslint-disable-next-line jsx-a11y/click-events-have-key-events, jsx-a11y/no-static-element-interactions
    react_1.default.createElement("div", { className: b(modifiers, notification.className), onMouseEnter: notification.onMouseEnter, onMouseLeave: notification.onMouseLeave, onClick: notification.onClick },
        sourceIcon ? react_1.default.createElement("div", { className: b('left') }, sourceIcon) : null,
        react_1.default.createElement("div", { className: b('right') },
            react_1.default.createElement("div", { className: b('right-top-part') },
                react_1.default.createElement("div", { className: b('right-meta-and-title') },
                    react_1.default.createElement("div", { className: b('right-meta') },
                        (source === null || source === void 0 ? void 0 : source.title) ? renderSourceTitle(source.title, source.href) : null,
                        (source === null || source === void 0 ? void 0 : source.title) && formattedDate ? react_1.default.createElement("span", null, "\u2022") : null,
                        formattedDate ? (react_1.default.createElement("div", { className: b('right-date') }, formattedDate)) : null),
                    title ? react_1.default.createElement("div", { className: b('right-title') }, title) : null),
                react_1.default.createElement("div", { className: b('actions', { 'right-side-actions': true }) }, props.notification.sideActions)),
            react_1.default.createElement("div", { className: b('right-content') }, content),
            props.notification.bottomActions ? (react_1.default.createElement("div", { className: b('actions', { 'right-bottom-actions': true }) }, props.notification.bottomActions)) : null)));
});
function renderSourceTitle(title, href) {
    return href ? (react_1.default.createElement(uikit_1.Link, { className: b('right-source-title'), href: href, target: "_blank", title: title }, title)) : (react_1.default.createElement("div", { className: b('right-source-title'), title: title }, title));
}
function renderSourceIcon(source) {
    const iconElement = getIconElement(source);
    if (!iconElement)
        return null;
    return source.href ? (react_1.default.createElement(uikit_1.Link, { href: source.href, target: "_blank" }, iconElement)) : (iconElement);
}
function getIconElement(source) {
    if ('icon' in source && source.icon) {
        return react_1.default.createElement(uikit_1.Icon, { className: b('source-icon'), size: 36, data: source.icon });
    }
    else if ('imageSrc' in source && source.imageSrc) {
        return react_1.default.createElement("img", { alt: "", className: b('source-icon'), src: source.imageSrc });
    }
    else {
        return null;
    }
}
